# Particle Simulator

コンピュートシェーダーを使ったパーティクルのシミュレーションを行います。

## デモ

![Demo1](https://github.com/mnrn/ParticleSimulator/blob/main/Recordings/movie.gif)

![Demo2](https://github.com/mnrn/ParticleSimulator/blob/main/Recordings/movie2.gif)

## 概要説明

コンピュートシェーダーによる物理演算を行いパーティクルが複数のブラックホールに吸い込まれるシミュレートを行います。  
上のデモでは2つのブラックホールに吸い込まれています。

## 制作経緯

職務経歴書のスキル欄を見ただけでは本人の実力が伝わらないと思ったので実力がわかりやすいものを制作しました。  
業務では普段はDirectXやOpenGL環境が多かったのですが、Unityの講師をやっているということもあり、Unityで今回は作ってみました。  

Unityは低レイヤーの部分を隠してかんたんにゲームが作れるという強みがありますが、低レイヤーの知識は高速化などが必要になった際になければならないです。  
ここでは、Unityを使いつつも、DirectXやOpenGL/Vulkanで使うようなグラフィックスパイプラインの知識がないと組めないような内容になっています。

~~Unity環境がMacOSにしかなかったため、MacOSでの開発となりましたが、そのためにShaderが一部Metal(MacOS)依存になっている部分があります。~~

Windows環境でも動作確認しました。

製作期間は1日です。次の日までかなり疲れてしまいました。  
動くものを早くつくることを最優先したため、ところどころ甘いところがあります。

### 製作環境

- OS
  - MacOSX Catalina 10.15
  - Windows 10
- ゲームエンジン
  - Unity 2019
- ツール
  - Visual Studio for Mac
  - VSCode
  - Git / GitHub

## 学んだこと

Unityのコンピュートシェーダーはあまりクセを感じませんでしたが、そもそもUnityで点をプリミティブで描画する機会がなかったため、そこが少しむずかしいところでした。  

点(パーティクル)の位置をコンピュートシェーダーで計算しましたが、点の位置を高速に計算できるということはジオメトリシェーダーでポリゴンに変換できるということなのでいろいろと表現の幅が広がるなと感じました。

## 改善すべき点

重力の影響外まで行ってしまったパーティクルをとりあえず点(0, 0, 0)に戻してしまっているので時間が立つと加算合成によりすごく真ん中が白くなってしまっています。

おそらくランダムに点を戻せば少しはマシになると思います。
